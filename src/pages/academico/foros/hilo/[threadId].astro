---
import DashboardLayout from '@/layouts/DashboardLayout.astro';
import ThreadDetailPage from '@/process/academic/dasboard/foros/thread-detail/ThreadDetailPage';

// ============================================
// getStaticPaths - Pre-genera páginas estáticas con IDs fijos (1-100)
// ============================================
export async function getStaticPaths() {
  // IDs estáticos del 1 al 100 - No requiere fetch al API durante el build
  // El componente React ThreadDetailPage hace fetch de los datos en el cliente
  const staticIds = Array.from({ length: 100 }, (_, i) => i + 1);

  console.log(`[Build] Generating ${staticIds.length} thread pages (static IDs)`);

  return staticIds.map((id) => ({
    params: { threadId: id.toString() },
  }));
}

const robots = ["noindex", "nofollow"];

const { threadId } = Astro.params;

const title = "Hilo de Discusión | Incadev";
const description = "Participa en esta discusión de la comunidad académica.";
const keywords = ["foros Incadev", "comunidad estudiantil", "discusiones académicas"];
const url = `https://instituto.cetivirgendelapuerta.com/academico/foros/hilo/${threadId}`;
const imageOG = "/ISOLOGOTIPO_VERTICAL.svg";
const imagetwt = "/ISOLOGOTIPO_VERTICAL.svg";
---

<DashboardLayout {robots} {title} {description} {keywords} {url} {imageOG} {imagetwt}>
	<ThreadDetailPage threadId={parseInt(threadId || "0")} client:load/>
</DashboardLayout>
