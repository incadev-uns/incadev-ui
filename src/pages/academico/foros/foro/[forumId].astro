---
import DashboardLayout from '@/layouts/DashboardLayout.astro';
import ThreadListPage from '@/process/academic/dasboard/foros/thread-list/ThreadListPage';

// ============================================
// getStaticPaths - Pre-genera páginas estáticas con IDs fijos (1-20)
// ============================================
export async function getStaticPaths() {
  // IDs estáticos del 1 al 20 - No requiere fetch al API durante el build
  // El componente React ThreadListPage hace fetch de los datos en el cliente
  const staticIds = [
    1, 2, 3, 4, 5, 6, 7, 8, 9, 10,
    11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
  ];

  console.log(`[Build] Generating ${staticIds.length} forum pages (static IDs)`);

  return staticIds.map((id) => ({
    params: { forumId: id.toString() },
  }));
}

const robots = ["noindex", "nofollow"];

const { forumId } = Astro.params;

const title = "Foro | Incadev";
const description = "Explora los hilos de discusión en este foro académico.";
const keywords = ["foros Incadev", "comunidad estudiantil", "discusiones académicas", "soporte entre estudiantes"];
const url = `https://instituto.cetivirgendelapuerta.com/academico/foros/foro/${forumId}`;
const imageOG = "/ISOLOGOTIPO_VERTICAL.svg";
const imagetwt = "/ISOLOGOTIPO_VERTICAL.svg";
---

<DashboardLayout {robots} {title} {description} {keywords} {url} {imageOG} {imagetwt}>
	<ThreadListPage forumId={parseInt(forumId || "0")} client:load/>
</DashboardLayout>
